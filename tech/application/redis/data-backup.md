# 2. Data Backup

### RDB

* `BGSAVE` : fork 할때, 메모리 사용이 많다….(2배가 되니 주의!!!)
  * 데이터가 큰 경우, fork 과정에서, 수초의 서비스 중단이 발생 할 수 도 있다.
* AOF 복구 보다, RDB 파일 복구가 빠르다!

### AOF

* 데이터 손실을 가능한 적게 하고자 할때
* RDB가 일반적으로 5분 주기로 실행된다. 서버 다운 발생시, 해당 주기만큼 데이터 손실 발생.
* `fsync` 주기 따라서 쓰기명령 qps 영향 준다.
  * always : 쓰기 명령어 실행 될 때마다
  * everysec : 1초간 모으기
  * no : os가 30초 주기로, 디스크에 저장한다. ( 데이터 유실 가능성 있다! )
* `rewrite` : 현재 메모리 정보 재기록 ( 로그파일 사이즈를 줄일 수 있다! 자식 프로세스가 수행한다 )
  * rewrite 실행 시점 이후, 복구가 가능하다.
